---
phase: 03-master-profile-management
plan: 03
type: execute
wave: 2
depends_on: ["03-01", "03-02"]
files_modified:
  - frontend/app/profile/create/page.tsx
  - frontend/app/profile/components/wizard/ProfileWizard.tsx
  - frontend/app/profile/components/wizard/WizardContext.tsx
  - frontend/app/profile/components/wizard/StepIndicator.tsx
  - frontend/app/profile/components/wizard/steps/PersonalInfoStep.tsx
autonomous: true

must_haves:
  truths:
    - "User sees a 4-step progress indicator showing Personal, Experience, Education/Certs, Skills"
    - "User can fill in personal info form with name, email, phone, location fields"
    - "Clicking Save and Continue saves personal info to backend and advances to step 2"
    - "Clicking Skip advances to step 2 without saving"
    - "Progress indicator visually marks completed steps"
    - "Previously saved data loads when returning to a step"
  artifacts:
    - path: "frontend/app/profile/create/page.tsx"
      provides: "Wizard container page"
      min_lines: 10
    - path: "frontend/app/profile/components/wizard/ProfileWizard.tsx"
      provides: "Wizard layout with step rendering"
      min_lines: 30
    - path: "frontend/app/profile/components/wizard/WizardContext.tsx"
      provides: "React context for wizard state management"
      contains: "WizardProvider"
    - path: "frontend/app/profile/components/wizard/StepIndicator.tsx"
      provides: "Visual progress indicator for 4 steps"
      min_lines: 20
    - path: "frontend/app/profile/components/wizard/steps/PersonalInfoStep.tsx"
      provides: "First step form with React Hook Form"
      contains: "personalInfoSchema"
  key_links:
    - from: "frontend/app/profile/components/wizard/steps/PersonalInfoStep.tsx"
      to: "frontend/lib/profile-api.ts"
      via: "profileAPI.updatePersonalInfo call on submit"
      pattern: "profileAPI\\.updatePersonalInfo"
    - from: "frontend/app/profile/components/wizard/steps/PersonalInfoStep.tsx"
      to: "frontend/lib/validations/profile.ts"
      via: "zodResolver with personalInfoSchema"
      pattern: "zodResolver.*personalInfoSchema"
    - from: "frontend/app/profile/create/page.tsx"
      to: "frontend/app/profile/components/wizard/ProfileWizard.tsx"
      via: "component render"
      pattern: "ProfileWizard"
---

<objective>
Build the multi-step wizard shell with the first step (Personal Info). This creates the wizard navigation framework, step progress indicator, and the first functional form that saves to the backend.

Purpose: The wizard is the primary profile creation flow. Personal Info is step 1 and the only step with required fields. This plan establishes the wizard pattern that subsequent steps (Experience, Education/Certs, Skills) will follow.
Output: Working wizard at /profile/create with step indicator, navigable steps, and functional Personal Info form.
</objective>

<execution_context>
@C:\Users\pc\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\pc\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-master-profile-management/03-CONTEXT.md
@.planning/phases/03-master-profile-management/03-RESEARCH.md
@.planning/phases/03-master-profile-management/03-01-SUMMARY.md
@.planning/phases/03-master-profile-management/03-02-SUMMARY.md
@frontend/lib/validations/profile.ts
@frontend/lib/profile-api.ts
@frontend/types/profile.ts
@frontend/app/layout.tsx
@frontend/middleware.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build wizard framework (context, step indicator, wizard shell)</name>
  <files>
    frontend/app/profile/create/page.tsx
    frontend/app/profile/components/wizard/WizardContext.tsx
    frontend/app/profile/components/wizard/StepIndicator.tsx
    frontend/app/profile/components/wizard/ProfileWizard.tsx
  </files>
  <action>
**WizardContext.tsx** - React context for wizard state:
```typescript
type WizardStep = 1 | 2 | 3 | 4
type WizardContextType = {
  currentStep: WizardStep
  completedSteps: Set<number>
  profileData: MasterProfile | null
  goToStep: (step: WizardStep) => void
  markStepComplete: (step: number) => void
  setProfileData: (data: MasterProfile) => void
  isLoading: boolean
}
```

The provider should:
1. Initialize by calling `profileAPI.getProfile()` on mount to load existing data
2. Determine which steps are "complete" based on existing data (personal info filled = step 1 complete, has experiences = step 2 complete, etc.)
3. Store profile data in state for child components to read default values
4. Start at step 1 by default (wizard is for creation/setup)
5. Track `isLoading` while fetching initial profile data

**StepIndicator.tsx** - Visual progress indicator per user decision:
- 4 steps displayed horizontally: 1. Personal Info, 2. Experience, 3. Education & Certs, 4. Skills
- Each step shows: step number, step label
- Visual states: completed (checkmark + green), current (highlighted/blue), upcoming (grey)
- Clickable steps - user can click any step to navigate (steps don't need to be completed in order since skipping is allowed)
- Use Tailwind classes for styling
- Responsive: horizontal on desktop, can stack labels below circles on mobile

**ProfileWizard.tsx** - Main wizard container:
- Wraps content in WizardProvider
- Renders StepIndicator at top
- Conditionally renders step component based on currentStep:
  - Step 1: PersonalInfoStep
  - Step 2: placeholder div "Experience step coming soon"
  - Step 3: placeholder div "Education & Certifications step coming soon"
  - Step 4: placeholder div "Skills step coming soon"
- Shows loading spinner while WizardContext is loading initial data

**page.tsx** (at `/profile/create`):
- 'use client' directive
- Renders ProfileWizard component
- Page title: "Create Your Profile"
- Basic page layout (max-width container, padding)
  </action>
  <verify>
1. Navigate to /profile/create in browser (user must be logged in - middleware protects /profile)
2. Step indicator renders with 4 steps
3. Clicking step numbers navigates between steps
4. Step 1 is highlighted as current by default
5. No TypeScript compilation errors: `cd frontend && npx tsc --noEmit`
  </verify>
  <done>
Wizard framework renders at /profile/create with 4-step progress indicator. Steps are clickable for navigation. WizardContext loads existing profile data from backend on mount. Placeholder content shown for steps 2-4.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build Personal Info step form</name>
  <files>
    frontend/app/profile/components/wizard/steps/PersonalInfoStep.tsx
  </files>
  <action>
**PersonalInfoStep.tsx** - Form for wizard step 1:

Use React Hook Form with Zod resolver (personalInfoSchema from lib/validations/profile.ts).

Form fields (using shadcn/ui Form components):
1. **First Name** - text input, required (asterisk indicator)
2. **Last Name** - text input, required
3. **Email** - email input, required (pre-fill from profile data or user data)
4. **Phone** - tel input, optional
5. **Location** - text input, optional (placeholder: "e.g., Cape Town, South Africa")
6. **Notice Period** - select or text input, optional (common values: "Immediately", "2 weeks", "1 month", "2 months", "3 months")
7. **Professional Summary / Bio** - textarea, optional, max 500 chars with character counter

Form behavior:
- Pre-populate fields from WizardContext profileData if available (user returning to edit)
- On submit: call `profileAPI.updatePersonalInfo(data)`, then `markStepComplete(1)`, then `goToStep(2)`
- Show loading state on Save button while API call is in progress
- Display inline validation errors per field using FormMessage
- Show "Saved successfully" brief toast/indicator after save

Navigation buttons at bottom:
- **"Save & Continue"** (primary button, submits form)
- **"Skip"** (secondary/ghost button, calls `goToStep(2)` without saving)

Per user decision: Step 1 requires name, email, phone, location. But the validation schema should mark phone and location as optional to match the Zod schema defined in 03-02. The "requires" is about UI guidance (showing these as important) not hard validation blocks. Actually re-reading: "Step 1 (Personal Info) requires: name, email, phone, location (notice period and bio optional)". So name and email ARE required (hard validation), phone and location are "required" in the sense they're important but per Zod they can be optional strings. Follow the Zod schema from 03-02 which makes phone and location optional.

Use the shadcn/ui Form, FormField, FormItem, FormLabel, FormControl, FormMessage pattern from the research examples.
  </action>
  <verify>
1. Personal Info form renders with all 7 fields
2. Submitting with empty first name or last name shows validation errors
3. Submitting with valid data calls the backend API (check Network tab)
4. After successful save, wizard advances to step 2
5. Clicking "Skip" advances to step 2 without API call
6. Returning to step 1 shows previously saved data
  </verify>
  <done>
Personal Info step form works with React Hook Form + Zod validation. Fields pre-populate from existing data. Save & Continue saves to backend and advances. Skip navigates without saving. Validation errors display inline. Step marked complete after save.
  </done>
</task>

</tasks>

<verification>
1. /profile/create page loads with wizard interface
2. Step indicator shows 4 steps with correct labels
3. Personal Info form validates and saves to backend
4. Navigation between steps works via indicator clicks and buttons
5. No TypeScript errors
</verification>

<success_criteria>
- Wizard renders at /profile/create with 4-step progress indicator
- Personal Info form has all 7 fields with proper validation
- Save & Continue persists data to backend via API
- Skip button works without requiring save
- Completed steps show visual checkmark in step indicator
- Existing profile data pre-populates form fields
</success_criteria>

<output>
After completion, create `.planning/phases/03-master-profile-management/03-03-SUMMARY.md`
</output>
