---
phase: 03-master-profile-management
plan: 06
type: execute
wave: 3
depends_on: ["03-03", "03-04", "03-05"]
files_modified:
  - frontend/app/profile/create/page.tsx
  - frontend/app/profile/components/wizard/ProfileWizard.tsx
  - frontend/app/profile/components/wizard/steps/ExperienceStep.tsx
  - frontend/app/profile/components/wizard/steps/EducationCertsStep.tsx
  - frontend/app/profile/components/wizard/steps/SkillsStep.tsx
  - frontend/app/profile/page.tsx
  - frontend/app/profile/components/ProfileView.tsx
  - frontend/app/dashboard/page.tsx
autonomous: false

must_haves:
  truths:
    - "User can complete all 4 wizard steps: Personal, Experience, Education/Certs, Skills"
    - "Each wizard step saves independently to backend"
    - "User can skip any step and return to it later"
    - "User can view complete profile at /profile showing all sections in correct order"
    - "Profile view displays sections in order: Personal, Skills, Experience, Education, Projects, Certifications"
    - "Dashboard has link to create/edit profile"
    - "User can navigate between profile view and profile edit"
  artifacts:
    - path: "frontend/app/profile/components/wizard/steps/ExperienceStep.tsx"
      provides: "Wizard step 2 wrapping ExperienceSection"
      min_lines: 15
    - path: "frontend/app/profile/components/wizard/steps/EducationCertsStep.tsx"
      provides: "Wizard step 3 wrapping Education + Certifications"
      min_lines: 15
    - path: "frontend/app/profile/components/wizard/steps/SkillsStep.tsx"
      provides: "Wizard step 4 wrapping SkillsSection"
      min_lines: 15
    - path: "frontend/app/profile/page.tsx"
      provides: "Profile view page showing complete profile"
      min_lines: 30
    - path: "frontend/app/profile/components/ProfileView.tsx"
      provides: "Complete profile display with all sections"
      contains: "MasterProfile"
  key_links:
    - from: "frontend/app/profile/components/wizard/ProfileWizard.tsx"
      to: "frontend/app/profile/components/wizard/steps/ExperienceStep.tsx"
      via: "conditional render in step switch"
      pattern: "ExperienceStep"
    - from: "frontend/app/profile/page.tsx"
      to: "frontend/lib/profile-api.ts"
      via: "profileAPI.getProfile on mount"
      pattern: "profileAPI\\.getProfile"
    - from: "frontend/app/dashboard/page.tsx"
      to: "frontend/app/profile"
      via: "Next.js Link navigation"
      pattern: "href.*profile"
---

<objective>
Wire remaining wizard steps to section components, build the profile view page, and connect everything with navigation from the dashboard. This completes the full profile management flow.

Purpose: Integrates all previously built components into a cohesive user experience: wizard for creation, profile view for reviewing, and dashboard navigation for access.
Output: Complete profile management flow from dashboard to wizard to profile view, all sections functional.
</objective>

<execution_context>
@C:\Users\pc\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\pc\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-master-profile-management/03-CONTEXT.md
@.planning/phases/03-master-profile-management/03-03-SUMMARY.md
@.planning/phases/03-master-profile-management/03-04-SUMMARY.md
@.planning/phases/03-master-profile-management/03-05-SUMMARY.md
@frontend/app/dashboard/page.tsx
@frontend/app/profile/create/page.tsx
@frontend/app/profile/components/wizard/ProfileWizard.tsx
@frontend/app/profile/components/wizard/WizardContext.tsx
@frontend/app/profile/components/experience/ExperienceSection.tsx
@frontend/app/profile/components/skills/SkillsSection.tsx
@frontend/app/profile/components/sections/EducationSection.tsx
@frontend/app/profile/components/sections/ProjectsSection.tsx
@frontend/app/profile/components/sections/CertificationsSection.tsx
@frontend/lib/profile-api.ts
@frontend/types/profile.ts
@frontend/middleware.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Wire wizard steps and build profile view page</name>
  <files>
    frontend/app/profile/components/wizard/steps/ExperienceStep.tsx
    frontend/app/profile/components/wizard/steps/EducationCertsStep.tsx
    frontend/app/profile/components/wizard/steps/SkillsStep.tsx
    frontend/app/profile/components/wizard/ProfileWizard.tsx
    frontend/app/profile/page.tsx
    frontend/app/profile/components/ProfileView.tsx
  </files>
  <action>
**ExperienceStep.tsx** - Wizard step 2:
- Wrapper component that renders ExperienceSection from the experience components
- Pass profile data from WizardContext as experiences prop
- After any CRUD operation, refresh profile data in WizardContext
- Navigation buttons at bottom: "Back" (goToStep 1), "Save & Continue" (marks step complete, goToStep 3), "Skip" (goToStep 3)
- Since ExperienceSection handles its own CRUD saving, "Save & Continue" just marks complete and navigates
- Mark step complete if user has added at least 1 experience, or if they click Save & Continue

**EducationCertsStep.tsx** - Wizard step 3:
- Renders both EducationSection and CertificationsSection vertically (Education first, then Certifications)
- Divider or spacing between the two sections
- Pass profile data from WizardContext
- Navigation: "Back" (goToStep 2), "Save & Continue" (goToStep 4), "Skip" (goToStep 4)

**SkillsStep.tsx** - Wizard step 4 (final step):
- Renders SkillsSection from skills components
- Pass profile data from WizardContext
- Navigation: "Back" (goToStep 3), "Finish" (primary button, navigates to /profile to view complete profile)
- "Finish" marks step complete and redirects to the profile view page via `router.push('/profile')`

**Update ProfileWizard.tsx:**
- Replace placeholder divs with actual step components:
  - Step 1: PersonalInfoStep (already done)
  - Step 2: ExperienceStep
  - Step 3: EducationCertsStep
  - Step 4: SkillsStep

**ProfileView.tsx** - Complete profile display component:
- Loads profile data from `profileAPI.getProfile()` on mount
- Displays all sections in the user-specified order:
  1. **Personal Info** - Name, email, phone, location, notice period, bio. "Edit" button links to /profile/create (step 1)
  2. **Skills** - Tags/badges display. "Edit" link to /profile/create (step 4)
  3. **Work Experience** - ExperienceSection in view-only mode or with edit capabilities
  4. **Education** - Cards showing institution, degree, field, dates
  5. **Projects** - Cards showing name, description, tech stack, URL
  6. **Certifications** - Cards showing name, issuer, date, credential ID
- Each section has an "Edit" button that either:
  - Links to the wizard at the appropriate step, OR
  - Allows inline editing (show the section components with their CRUD capabilities)

  Decision (Claude's discretion): Show the full section components (ExperienceSection, SkillsSection, etc.) directly on the profile view page with their CRUD modals and reordering. This avoids duplicating UI and gives users immediate editing capability. The wizard is for initial setup; the profile view is for ongoing management.

- Empty sections show the same empty states as the section components
- Header: "My Profile" with overall completion indicator (e.g., "4 of 6 sections filled")
- Link to /profile/create for "Start over with wizard" or "Continue setup"

**page.tsx** (at `/profile`):
- 'use client' directive
- Renders ProfileView component
- Loading state while fetching profile data

**page.tsx** (update `/profile/create`):
- If profile already has substantial data (all steps complete), show a notice "You already have a profile. Continuing will update your existing data."

**Update frontend/middleware.ts:**
- The middleware already protects `/profile/:path*` routes (confirmed from reading it). No changes needed.
  </action>
  <verify>
1. All 4 wizard steps render their section components
2. Navigation (Back/Continue/Skip) works across all steps
3. Step 4 "Finish" button redirects to /profile view page
4. Profile view page loads and shows all sections in correct order
5. Each section on profile view page has edit capabilities
6. No TypeScript compilation errors
  </verify>
  <done>
All wizard steps functional with section components. Profile view page displays complete profile in user-specified section order with editing capabilities. Wizard and profile view are connected via navigation.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update dashboard with profile navigation and polish</name>
  <files>
    frontend/app/dashboard/page.tsx
  </files>
  <action>
Update the existing dashboard page to include profile management links:

1. Add a "Master Profile" section below the welcome card:
   - If user has no profile: Show call-to-action card "Create your Master Profile" with description "Set up your profile to start generating tailored CVs" and a "Create Profile" button linking to /profile/create
   - If user has a profile: Show profile summary card with name, completion status (e.g., "5 skills, 3 experiences, 2 education entries"), and "View Profile" / "Edit Profile" buttons linking to /profile

2. To determine if user has a profile: call `profileAPI.getProfile()` on mount (alongside the existing `authAPI.getMe()` call). The getProfile endpoint creates a minimal profile if none exists, so check if it has substantive data (has experiences or skills).

3. Keep existing dashboard layout (welcome card, settings link, logout button). Add the profile section below.

4. Use Tailwind classes for the new profile card if shadcn/ui is available, but ensure visual consistency with the existing inline-styled welcome card. Since the dashboard currently uses inline styles, the new profile section can either:
   - Use Tailwind classes (preferred, since 03-02 adds Tailwind), OR
   - Use inline styles to match the existing dashboard style

   Decision (Claude's discretion): Use Tailwind for the new profile section. The visual difference will be minimal and the entire dashboard can be migrated to Tailwind in a future cleanup.

5. Add a "Profile" link in the header navigation alongside "Settings" and "Log out".
  </action>
  <verify>
1. Dashboard loads and shows profile section
2. New user sees "Create your Master Profile" CTA
3. User with profile sees summary and edit link
4. Clicking "Create Profile" navigates to /profile/create
5. Clicking "View Profile" navigates to /profile
6. No regressions on existing dashboard functionality (logout, settings)
  </verify>
  <done>
Dashboard updated with profile management section. New users see CTA to create profile, existing users see profile summary with edit links. Navigation connected between dashboard, wizard, and profile view.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify complete profile management flow</name>
  <what-built>
Complete master profile management system:
- Multi-step wizard at /profile/create (4 steps: Personal, Experience, Education/Certs, Skills)
- Profile view page at /profile showing all sections
- Work experience with modal forms, bullet points, and drag-and-drop
- Skills with autocomplete tag input
- Education, Projects, Certifications with modal CRUD
- Dashboard with profile navigation
  </what-built>
  <how-to-verify>
1. Start Docker services: `docker-compose up -d`
2. Log in at http://localhost:3000/login
3. Click "Create Profile" on dashboard
4. **Step 1 - Personal Info:**
   - Fill in name, email, phone, location
   - Click "Save & Continue" - should advance to step 2
   - Click step 1 in indicator to go back - data should be pre-filled
5. **Step 2 - Experience:**
   - Click "+ Add Experience" - modal should open
   - Fill in job title, company, dates, add 2-3 bullet points
   - Save - card should appear
   - Add another experience entry
   - Drag to reorder experiences
   - Click Edit on a card - modal opens with data
   - Click Skip to proceed
6. **Step 3 - Education & Certs:**
   - Add an education entry (institution, degree, dates)
   - Add a certification (name, issuer)
   - Skip is also fine
7. **Step 4 - Skills:**
   - Type "java" - should see JavaScript, Java suggestions
   - Type "js" - should suggest JavaScript
   - Add several skills as tags
   - Remove a skill by clicking X
   - Click "Finish" - should go to /profile
8. **Profile View:**
   - Verify section order: Personal, Skills, Experience, Education, Projects, Certifications
   - Verify all entered data is displayed
   - Try editing from the profile view
9. **Dashboard:**
   - Navigate to dashboard
   - Verify profile summary shows
   - "View Profile" link works
  </how-to-verify>
  <resume-signal>Type "approved" if the profile management flow works correctly, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
1. Complete wizard flow: Personal -> Experience -> Education/Certs -> Skills -> Profile View
2. All sections save independently to backend
3. Skip functionality works on all steps
4. Profile view shows all data in correct section order
5. Dashboard connects to profile wizard and view
6. Drag-and-drop works for reordering
7. Skills autocomplete suggests correct canonical names
8. No data loss when navigating between steps
</verification>

<success_criteria>
- Full wizard flow from step 1 to 4 with working Save, Skip, Back navigation
- Profile view page at /profile shows all 6 sections in user-specified order
- Dashboard links to profile creation and viewing
- All CRUD operations work: add, edit, delete for all sections
- Drag-and-drop reordering persists for experience, skills, education, projects, certifications
- Skills autocomplete normalizes abbreviations and prevents duplicates
- Human verification confirms complete flow works end-to-end
</success_criteria>

<output>
After completion, create `.planning/phases/03-master-profile-management/03-06-SUMMARY.md`
</output>
